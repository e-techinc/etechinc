---
title: SED Tutorial
published: true
---   


# Stream EDitor(SED) Tutorial   
SED의 전체이름은 `Stream EDitor` 입니다. SED는 간단하고 강력한 텍스트 분석기이며,   
해당내용을 수정할 수 있는 유틸리티입니다. 1973-74년 무렵 Bell연구소의 Lee E. McMahonDevelopment  
에서 만들어졌으며, 오늘날의 대부분의 운영체제에서 실행 가능합니다.    

McMahon은 일반적인 라인에디터의 기능을 스트림에 적용하도록 만들었습니다. SED의 대부분의 문법과 기능은   
`ED`라인에디터에서 기능을 빌려와서 구현했습니다. 구현단계에서 이미 정규표현식(Regular Expressions)을  
지원합니다. SED는 파일이나, 키보드, 파이프에서 입력을 받아서 처리할 수 있습니다.   

SED는 현재 GNU SED에서 만들과 관리되고 있습니다. SED문법은 초보자가 보기에는 외계어같이 보일 수도 있습니다.   
하지만, 문법에대해서 배우고 난 후에는 단순히 복합적인 작업을 처리하는 단 몇줄의 명령어임을 알 수 있습니다.    

## SED의 사용처  
SED는 다음과 같은 곳에서 사용될 수 있습니다.  

* 텍스트변환   
* 텍스트파일의 특수한 영역 출력  
* 텍스트파일의 특정위치에서 편집 작업  
* 파일에 대한 비대화식 편집작업   

## Workflow  

SED가 문제를 처리하는 방식은 다음과 같습니다. SED의 고수가 되기 위해서는 SED가 내부적으로 어떻게     
문제를 처리하는지를 알고 있어야 합니다.   

크게, SED는 `read` -> `implement` -> `display` 의 세단계에 기초해서 처리합니다.    
이 부분을 그림으로 설명하면 다음과 같습니다.  

![SED Workflow](https://e-techinc.github.io/etechinc/assets/images/sed-workflow.jpg)  

* `read`   
   SED는 입력스트림(파일, 파이프, 표준입력)에서 한줄을 읽어들인 후에 **패턴버퍼** 라는 곳에 저장합니다.    
* `implement`    
   기본적으로 모든 SED 명령어는 패턴버퍼를 기준으로 순차적으로 처리하도록 되어 있습니다.   
   주소를 지정하지 않았을 경우에는 모든행에 대해서 처리하게 됩니다.     
* `display`   
   변경된 내용을 출력스트림으로 보내서 화면에 출력합니다. 데이터를 보낸 후 패턴버퍼를 비웁니다.    
   
위의 과정을 모든 컨텐츠를 처리할때 까지 반복해서 처리합니다.     

## 사전 주의 사항    
* 패턴버퍼(Pattern Buffer)는  활성버퍼의 역활을 하고 SED 명령어를 처리하는 주요 저장소 역활을 합니다.     
* SED의 모든 명령어와 처리는 스키마공간(Schema Space)에서 처리되므로, 원본파일이 변경되지 않습니다.     
* SED에는 패턴버퍼외에 홀드스페이스(Hold Space)가 존재합니다. 홀드스페이스는 패턴버퍼의 내용을 일시적으로    
  저장해서 추후에 사용하거나 할때 사용되어 지는 공간입니다. 반복처리가 종료된 후 SED는 스키마공간에서   
  컨텐츠를 제거합니다. SED 명령어를 이용해서 곧바로 스키마공간을 처리할 수는 없습니다.    
* 기본적으로 보존공간과 패턴공간은 비워져 있습니다.   
* SED는 입력파일을 제공하지 않을 경우, 표준입력으로 처리하게 됩니다.     
* SED에서 주소지정이 생략되었을 경우에는 모든 라인을 처리대상으로 처리합니다.    


## 예제   
`quote.txt` 라는 예제 파일을 생성해서 간략히 설명하도록 하겠습니다. Paulo Coelho 작가의 내용을 담고있습니다.    
```bash
$ vi quote.txt
There is only one thing that makes a dream impossible to achieve: the fear of failure.
  - Paulo Coelho, The Alchemist
```     
SED 유틸리티의 처리방식을 이해하기 위해서는, 먼저 SED가 quote.txt 파일의 내용을 출력하는 것으로 시작합니다.   
이것은 UNIX의 `cat`명령어와 유사하게 작동합니다.    
```bash
$ sed ' ' quote.txt 
There is only one thing that makes a dream impossible to achieve: the fear of failure.
- Paulo Coelho, The Alchemist
```     
위의 예제서는 `quote.txt` 파일이 입력파일로 사용되어지며, 두개의 홑따옴표가 SED의 명령어에 해당하고, 이것을   
실행하게 됩니다.   
첫째로, SED는 quote.txt 파일의 내용을 읽어들인 후, 스키마공간에 내용을 저장합니다. 그후에 SED명령어를 실행합니다.   
본 예제에서는 SED명령어를 한개도 사용하지 않았습니다. 그래서 버퍼에 들어있는 내용에 대해서 어떠한 작업도 수행하지     
않습니다. 모든 처리를 완료한 후에 스키마공간의 내용을 지운 후, 표준출력으로 내용을 출력하게 됩니다.   
간단한 처리방식이지 않습니까????    

다음의 예제는 SED가 표준입력에서 데이터를 처리하는 예제입니다.   
```bash
$ sed ' '
```   
상기의 명령을 수행하면, 다음과 같이 결과가 출력됩니다.  
```bash
There is only one thing that makes a dream impossible to achieve: the fear of failure. 
There is only one thing that makes a dream impossible to achieve: the fear of failure.
```    
첫번째 줄은 사용자가 키보드로 입력한 내용이고, 두번째 줄은 SED가 입력을 받아서 그대로 표시한 것입니다.  

> SED 를 표준입력으로 처리할 경우, 종료하기 위해서는 `Ctrl + D(^D)`키를 눌러서 종료합니다.    

## 기본 문법   
본 장에서는 SED 명령어에 대해서 기본적인 부분과 명령행 옵션에 대해서 설명합니다. SED 명령어는 두가지   
방식으로 호출되어 사용되어 집니다.   
```bash
sed [-n] [-e] 'command(s)' files 
sed [-n] -f scriptfile files
```    



   


